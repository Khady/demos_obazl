((:ws-path "/Users/gar/obazl/demos_obazl/tools_obazl/convert") (:pkg-path "rules/actions/with-stdout-to/bash") (:realpath "/Users/gar/obazl/demos_obazl/tools_obazl/convert/rules/actions/with-stdout-to/bash") (:files (:static "BUILD.sh.bazel" "a.txt" "b.txt" "c.txt" "d.txt" "dune.mibl") (:dynamic "output.txt")) (dune (rule (targets output.txt) (deps myscript.sh (:inputs (glob_files *.txt))) (action (with-stdout-to %{targets} (run bash myscript.sh %{inputs}))))) (:scripts "myscript.sh") (:dune (:rule (:deps (::inputs (:pkg . "rules/actions/with-stdout-to/bash") (:tgts . :inputs)) (:myscript.sh (:pkg . "rules/actions/with-stdout-to/bash") (:tgt . "myscript.sh"))) (:outputs (:output.txt (:pkg . "rules/actions/with-stdout-to/bash") (:tgt . "output.txt"))) (:actions (:cmd (:Tool (string->symbol (format #f ":~A" bash))) (:args "myscript.sh" :inputs)) (:stdout %{targets})))))