load("@rules_ocaml//build:rules.bzl", "ocaml_module")

ocaml_module(
    name    = "Hello",
    visibility = ["//module_binding/dyadic/selectstruct/dir_prefix:__pkg__"],

    # sig source file in different package:
    sig    = "//module_binding/fixedsig:hello.mli",

    struct = select({
        "//bzl:linux_en":
        "//module_binding/dyadic/selectstruct/dir_prefix/linux/en:hello.ml",

        "//bzl:linux_fr":
        "//module_binding/dyadic/selectstruct/dir_prefix/linux/fr:hello.ml",

        # ":macos_en":
        "//bzl:macos_en":
        "//module_binding/dyadic/selectstruct/dir_prefix/macos/en:hello.ml",

        # ":macos_fr":
        "//bzl:macos_fr":
        "//module_binding/dyadic/selectstruct/dir_prefix/macos/fr:hello.ml",

    }, no_match_error = "unsupported config"),
)
